(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{4370:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(95155),l=s(12115),n=s(35695),r=s(57884),o=s(4605),i=s(97487),c=s(23571),d=s(90300),m=s(90308);function x(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)([]),[x,u]=(0,l.useState)([]),[h,p]=(0,l.useState)(!0),[y,f]=(0,l.useState)(null),[g,b]=(0,l.useState)("applications");(0,l.useEffect)(()=>{j()},[]);let j=async()=>{p(!0),f(null);try{let[e,t]=await Promise.all([i.p.getMyApplications(),i.p.getMyLoans()]);s(e),u(t.filter(e=>"ACTIVE"===e.status))}catch(e){console.error("Failed to load loan data:",e),f("Failed to load loan data. Please try again.")}finally{p(!1)}},v=e=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return h?(0,a.jsx)(o.A,{children:(0,a.jsx)(r.A,{children:(0,a.jsx)("div",{className:"py-8 sm:py-12 md:py-16 lg:py-20 bg-white",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Loading your loan information..."})]})})})})}):(0,a.jsx)(o.A,{children:(0,a.jsx)(r.A,{children:(0,a.jsx)("div",{className:"py-8 sm:py-12 md:py-16 lg:py-20 bg-white",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-8 sm:mb-12",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"My Loans"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-slate-600",children:"Track your loan applications and manage your active loans"})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("button",{onClick:()=>e.push("/user/apply"),className:"inline-flex items-center gap-2 px-6 py-3 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition-colors",children:[(0,a.jsx)(c.A,{className:"w-5 h-5"}),"Apply for New Loan"]})}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("div",{className:"border-b border-slate-200",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,a.jsxs)("button",{onClick:()=>b("applications"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("applications"===g?"border-cyan-500 text-cyan-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"),children:["Applications (",t.length,")"]}),(0,a.jsxs)("button",{onClick:()=>b("loans"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("loans"===g?"border-cyan-500 text-cyan-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"),children:["Active Loans (",x.length,")"]})]})})}),(0,a.jsxs)("div",{className:"space-y-6",children:["applications"===g&&(0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(c.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Applications Yet"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"You haven't submitted any loan applications yet."}),(0,a.jsx)("button",{onClick:()=>e.push("/user/apply"),className:"px-6 py-3 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition-colors",children:"Apply for Your First Loan"})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col sm:flex-row sm:items-center justify-between bg-slate-50",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-slate-900",children:["Amount: ",v(e.amount)]}),(0,a.jsxs)("div",{className:"text-slate-700 text-sm",children:["Purpose: ",e.purpose]}),(0,a.jsxs)("div",{className:"text-slate-700 text-sm",children:["Term: ",e.term," months"]}),(0,a.jsxs)("div",{className:"text-slate-700 text-sm",children:["Applied: ",new Date(e.createdAt).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"mt-2 sm:mt-0 flex flex-col items-end",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("ACTIVE"===e.status?"bg-green-100 text-green-700":"REJECTED"===e.status?"bg-red-100 text-red-700":"PENDING"===e.status?"bg-yellow-100 text-yellow-700":"bg-slate-200 text-slate-700"),children:"ACTIVE"===e.status?"Active":"REJECTED"===e.status?"Rejected":"PENDING"===e.status?"Under Review":e.status}),"REJECTED"===e.status&&e.rejectionReason&&(0,a.jsxs)("span",{className:"text-xs text-red-600 mt-1",children:["Reason: ",e.rejectionReason]})]})]},e.id))})),"loans"===g&&(0===x.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Active Loans"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"You don't have any active loans at the moment."}),(0,a.jsx)("button",{onClick:()=>e.push("/user/apply"),className:"px-6 py-3 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition-colors",children:"Apply for a Loan"})]}):(0,a.jsx)("div",{className:"space-y-4",children:x.map(t=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col sm:flex-row sm:items-center justify-between bg-slate-50",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-slate-900",children:["Amount: ",v(t.amount)]}),(0,a.jsxs)("div",{className:"text-slate-700 text-sm",children:["Purpose: ",t.purpose]}),(0,a.jsxs)("div",{className:"text-slate-700 text-sm",children:["Term: ",t.term," months"]}),(0,a.jsxs)("div",{className:"text-slate-700 text-sm",children:["Status: ",t.status]}),(0,a.jsxs)("div",{className:"text-slate-700 text-sm",children:["Applied: ",new Date(t.createdAt).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"mt-2 sm:mt-0 flex flex-col items-end gap-2",children:[(0,a.jsxs)("button",{onClick:()=>e.push("/user/repayment/".concat(t.id)),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),"Make Repayment"]}),(0,a.jsxs)("button",{onClick:()=>e.push("/user/loans/".concat(t.id)),className:"inline-flex items-center gap-2 px-4 py-2 bg-cyan-600 text-white text-sm font-medium rounded-lg hover:bg-cyan-700 transition-colors",children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),"View Details & History"]}),(0,a.jsxs)("button",{onClick:()=>e.push("/user/agreement/".concat(t.id)),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(c.A,{className:"w-4 h-4"}),"Download Agreement"]})]})]},t.id))}))]})]})})})})}},4605:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var a=s(95155),l=s(12115),n=s(35695),r=s(83459),o=s(44311),i=s(61608),c=s(95131),d=s(74310),m=s(52329),x=s(6874),u=s.n(x);function h(e){let{isOpen:t,onClose:s,title:n="Access Denied",message:r="You don't have permission to access this page. Please contact your administrator if you believe this is an error.",showHomeButton:x=!0,showBackButton:h=!0}=e;return(0,a.jsx)(o.e.Root,{show:t,as:l.Fragment,children:(0,a.jsxs)(i.lG,{as:"div",className:"relative z-50",onClose:s,children:[(0,a.jsx)(o.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,a.jsx)(o.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)(i.lG.Panel,{className:"relative transform overflow-hidden rounded-2xl bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,a.jsx)(c.A,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,a.jsx)(i.lG.Title,{as:"h3",className:"text-lg font-semibold leading-6 text-slate-900",children:n}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-slate-600",children:r})})]})]}),(0,a.jsxs)("div",{className:"mt-6 sm:mt-4 sm:flex sm:flex-row-reverse gap-3",children:[x&&(0,a.jsxs)(u(),{href:"/user",className:"inline-flex w-full justify-center rounded-lg bg-cyan-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-cyan-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600 sm:w-auto",onClick:s,children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]}),h&&(0,a.jsxs)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-lg bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 sm:mt-0 sm:w-auto",onClick:s,children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})]})})})})]})})}function p(e){let{children:t,fallback:s,requiredRole:o,redirectTo:i="/login"}=e,c=(0,n.useRouter)(),{user:d,isAuthenticated:m,isLoading:x}=(0,r.nc)(),[u,p]=(0,l.useState)(!1),[y,f]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{let e=setTimeout(()=>{p(!0)},100);return()=>clearTimeout(e)},[]),(0,l.useEffect)(()=>{!u||x||m?u&&!x&&o&&(null==d?void 0:d.role)!==o&&f(!0):c.push(i)},[m,x,u,c,o,null==d?void 0:d.role,i]),!u||x)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Loading..."})]})}):m?o&&(null==d?void 0:d.role)!==o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{isOpen:y,onClose:()=>{f(!1),(null==d?void 0:d.role)==="ADMIN"?c.push("/admin"):c.push("/user")},title:"Access Denied",message:"This page requires ".concat(o," privileges. You currently have ").concat(null==d?void 0:d.role," access."),showHomeButton:!0,showBackButton:!1}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Checking permissions..."})]})})]}):(0,a.jsx)(a.Fragment,{children:t}):s||(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Redirecting to login..."})]})})}},57884:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(95155),l=s(52074);function n(){return(0,a.jsxs)("footer",{className:"text-white text-sm text-center py-6",style:{backgroundColor:"var(--color-deep)"},children:["\xa9 ",new Date().getFullYear()," QuickFund. All rights reserved."]})}function r(e){let{children:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{}),(0,a.jsx)("main",{className:"flex flex-grow flex-col",children:t}),(0,a.jsx)(n,{})]})}},90300:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(12115);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},90308:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(12115);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},91092:(e,t,s)=>{Promise.resolve().then(s.bind(s,4370))},97487:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var a=s(7283);let l={applyForLoan:async e=>{try{return(await a.uE.post("/loans/apply",e)).data}catch(e){throw console.error("Failed to apply for loan:",e),e}},getMyApplications:async()=>{try{return(await a.uE.get("/loans/my-applications")).data}catch(e){throw console.error("Failed to fetch loan applications:",e),e}},getApplication:async e=>{try{return(await a.uE.get("/loans/".concat(e))).data}catch(e){throw console.error("Failed to fetch loan application:",e),e}},getMyLoans:async()=>{try{return(await a.uE.get("/loans/my-loans")).data}catch(e){throw console.error("Failed to fetch user loans:",e),e}},getLoanStats:async()=>{try{return(await a.uE.get("/loans/stats")).data}catch(e){throw console.error("Failed to fetch loan stats:",e),e}},makePayment:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INSTALLMENT";try{return(await a.uE.post("/loans/".concat(e,"/payments"),{amount:t,type:s})).data}catch(e){throw console.error("Failed to make payment:",e),e}},getPaymentHistory:async e=>{try{return(await a.uE.get("/loans/".concat(e,"/payments"))).data}catch(e){throw console.error("Failed to fetch payment history:",e),e}},cancelApplication:async e=>{try{await a.uE.delete("/loans/applications/".concat(e))}catch(e){throw console.error("Failed to cancel application:",e),e}},requestEarlyRepayment:async e=>{try{return(await a.uE.post("/loans/".concat(e,"/early-repayment"))).data}catch(e){throw console.error("Failed to request early repayment:",e),e}},getLoanAgreement:async e=>{try{return(await a.uE.get("/loans/".concat(e,"/agreement"))).data}catch(e){throw console.error("Failed to fetch loan agreement:",e),e}},acceptLoanAgreement:async e=>{try{await a.uE.post("/loans/".concat(e,"/accept-agreement"))}catch(e){throw console.error("Failed to accept loan agreement:",e),e}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[981,360,629,74,441,684,358],()=>t(91092)),_N_E=e.O()}]);