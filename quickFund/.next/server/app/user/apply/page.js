(()=>{var e={};e.id=799,e.ids=[799],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3935:(e,t,s)=>{Promise.resolve().then(s.bind(s,13059))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},13059:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/smart/projects/QuickFund-/quickFund/src/app/user/apply/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/smart/projects/QuickFund-/quickFund/src/app/user/apply/page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},21825:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(60687),r=s(43210),n=s(16189),o=s(17998),l=s(39192),i=s(38963),c=s(53891),d=s(41347),u=s(87865),m=s(49946),p=s(31740),x=s(55943);function h(){let e=(0,n.useRouter)(),{user:t}=(0,d.nc)(),[s,h]=(0,r.useState)({amount:"",purpose:"",term:"",notes:"",agreeToTerms:!1}),[y,v]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),[k,E]=(0,r.useState)(null),[A,F]=(0,r.useState)(!1),[q,P]=(0,r.useState)(null),[C,T]=(0,r.useState)(null),S=(0,r.useRef)(null),L={"250000-500000":{min:25e4,max:5e5,default:375e3},"500000-1000000":{min:5e5,max:1e6,default:75e4},"1000000-2500000":{min:1e6,max:25e5,default:175e4},"2500000-5000000":{min:25e5,max:5e6,default:375e4},"5000000-10000000":{min:5e6,max:1e7,default:75e5},"10000000+":{min:1e7,max:5e7,default:15e6}},R={3:3,6:6,12:12,18:18,24:24,36:36,48:48,60:60},G=e=>{let{name:t,value:s,type:a}=e.target,r="checkbox"===a?e.target.checked:void 0;h(e=>({...e,[t]:"checkbox"===a?r:s})),w&&N(null)},M=()=>s.amount?s.purpose?s.term?s.agreeToTerms?L[s.amount]?R[s.term]?null:"Invalid loan term selected":"Invalid loan amount selected":"Please agree to the terms and conditions":"Please select a loan term":"Please select a loan purpose":"Please select a loan amount",_=async e=>{e.preventDefault();let t=M();if(t)return void N(t);v(!0),N(null);try{let e=L[s.amount],t=R[s.term],a={amount:e.default,purpose:s.purpose,term:t,notes:s.notes||void 0},r=await u.p.applyForLoan(a);E(r),j(!0),D(r.id)}catch(e){console.error("Failed to submit loan application:",e),N(e.response?.data?.message||e.message||"Failed to submit loan application. Please try again.")}finally{v(!1)}},D=e=>{S.current&&clearInterval(S.current),S.current=setInterval(async()=>{try{let t=await u.p.getApplication(e);E(t),"PENDING"!==t.status&&(clearInterval(S.current),P("REJECTED"===t.status?"REJECTED":"PENDING"),T(t.rejectionReason||null),F(!0),j(!1))}catch(e){}},2e3)},I=()=>{j(!1),e.push("/user/loans")},$=()=>{F(!1),e.push("/user/loans")};return(0,a.jsx)(l.A,{requiredRole:"USER",children:(0,a.jsxs)(o.A,{children:[(0,a.jsx)("section",{className:"py-8 sm:py-12 md:py-16 lg:py-20 bg-white",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6 sm:p-8 lg:p-12",children:[(0,a.jsxs)("div",{className:"text-center mb-6 sm:mb-8 lg:mb-12",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Apply for a Loan"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-slate-600 max-w-2xl mx-auto",children:"Get the funds you need in as little as 24 hours with our streamlined application process"})]}),w&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 text-red-600"}),(0,a.jsx)("p",{className:"text-red-700 text-sm",children:w})]})}),(0,a.jsxs)("form",{onSubmit:_,className:"space-y-6 sm:space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-700 mb-2",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 sm:w-5 sm:h-5 inline mr-2"}),"Loan Amount *"]}),(0,a.jsxs)("select",{id:"amount",name:"amount",required:!0,value:s.amount,onChange:G,className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors text-sm sm:text-base",children:[(0,a.jsx)("option",{value:"",children:"Select loan amount"}),(0,a.jsx)("option",{value:"250000-500000",children:"₦250,000 - ₦500,000"}),(0,a.jsx)("option",{value:"500000-1000000",children:"₦500,000 - ₦1,000,000"}),(0,a.jsx)("option",{value:"1000000-2500000",children:"₦1,000,000 - ₦2,500,000"}),(0,a.jsx)("option",{value:"2500000-5000000",children:"₦2,500,000 - ₦5,000,000"}),(0,a.jsx)("option",{value:"5000000-10000000",children:"₦5,000,000 - ₦10,000,000"}),(0,a.jsx)("option",{value:"10000000+",children:"₦10,000,000+"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"purpose",className:"block text-sm font-medium text-slate-700 mb-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 sm:w-5 sm:h-5 inline mr-2"}),"Loan Purpose *"]}),(0,a.jsxs)("select",{id:"purpose",name:"purpose",required:!0,value:s.purpose,onChange:G,className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors text-sm sm:text-base",children:[(0,a.jsx)("option",{value:"",children:"Select loan purpose"}),(0,a.jsx)("option",{value:"business",children:"Business Expansion"}),(0,a.jsx)("option",{value:"personal",children:"Personal Expenses"}),(0,a.jsx)("option",{value:"education",children:"Education"}),(0,a.jsx)("option",{value:"home",children:"Home Improvement"}),(0,a.jsx)("option",{value:"vehicle",children:"Vehicle Purchase"}),(0,a.jsx)("option",{value:"medical",children:"Medical Expenses"}),(0,a.jsx)("option",{value:"debt",children:"Debt Consolidation"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"term",className:"block text-sm font-medium text-slate-700 mb-2",children:"Loan Term (Months) *"}),(0,a.jsxs)("select",{id:"term",name:"term",required:!0,value:s.term,onChange:G,className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors text-sm sm:text-base",children:[(0,a.jsx)("option",{value:"",children:"Select loan term"}),(0,a.jsx)("option",{value:"3",children:"3 months"}),(0,a.jsx)("option",{value:"6",children:"6 months"}),(0,a.jsx)("option",{value:"12",children:"12 months"}),(0,a.jsx)("option",{value:"18",children:"18 months"}),(0,a.jsx)("option",{value:"24",children:"24 months"}),(0,a.jsx)("option",{value:"36",children:"36 months"}),(0,a.jsx)("option",{value:"48",children:"48 months"}),(0,a.jsx)("option",{value:"60",children:"60 months"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-slate-700 mb-2",children:"Additional Notes (Optional)"}),(0,a.jsx)("textarea",{id:"notes",name:"notes",value:s.notes,onChange:G,rows:4,placeholder:"Please provide any additional information about your loan request...",className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors text-sm sm:text-base resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"agreeToTerms",name:"agreeToTerms",required:!0,checked:s.agreeToTerms,onChange:G,className:"mt-1 w-4 h-4 text-cyan-600 border-slate-300 rounded focus:ring-cyan-500 flex-shrink-0"}),(0,a.jsxs)("label",{htmlFor:"agreeToTerms",className:"text-xs sm:text-sm text-slate-600",children:["I agree to the"," ",(0,a.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),b(!0)},className:"text-cyan-600 hover:text-cyan-700 font-semibold underline",children:"Terms of Service"})," ","and"," ",(0,a.jsx)("a",{href:"/privacy",className:"text-cyan-600 hover:text-cyan-700 font-semibold",children:"Privacy Policy"})," *"]})]}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-cyan-600 text-white font-semibold rounded-lg shadow-md hover:bg-cyan-700 focus:bg-cyan-700 active:bg-cyan-800 hover:scale-105 focus:scale-105 active:scale-95 hover:shadow-lg focus:shadow-lg active:shadow-md transition-all duration-300 touch-manipulation select-none disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-sm sm:text-base",children:y?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting Application..."]}):"Submit Application"})]})]})})}),(0,a.jsx)(i.A,{isOpen:f,onClose:()=>b(!1)}),(0,a.jsx)(c.A,{isOpen:g,onClose:I,title:"Application Submitted!",message:"Your loan application has been submitted and is under review. You'll be notified here as soon as a decision is made.",actionText:"View My Applications",onAction:I,autoClose:!1}),(0,a.jsx)(c.A,{isOpen:A,onClose:$,title:"REJECTED"===q?"Loan Rejected":"Application Under Review",message:"REJECTED"===q?`Sorry, your loan application was rejected.${C?" Reason: "+C:""}`:"Your loan application is under review. You will be notified once an admin reviews your application.",actionText:"Go to My Loans",onAction:$,autoClose:!1})]})})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31740:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(43210);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},32211:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=s(65239),r=s(48088),n=s(88170),o=s.n(n),l=s(30893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let c={children:["",{children:["user",{children:["apply",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,13059)),"/home/smart/projects/QuickFund-/quickFund/src/app/user/apply/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/home/smart/projects/QuickFund-/quickFund/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/smart/projects/QuickFund-/quickFund/src/app/user/apply/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/user/apply/page",pathname:"/user/apply",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},33873:e=>{"use strict";e.exports=require("path")},39192:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var a=s(60687),r=s(43210),n=s(16189),o=s(41347),l=s(68457),i=s(88143),c=s(63553),d=s(46370),u=s(70059),m=s(85814),p=s.n(m);function x({isOpen:e,onClose:t,title:s="Access Denied",message:n="You don't have permission to access this page. Please contact your administrator if you believe this is an error.",showHomeButton:o=!0,showBackButton:m=!0}){return(0,a.jsx)(l.e.Root,{show:e,as:r.Fragment,children:(0,a.jsxs)(i.lG,{as:"div",className:"relative z-50",onClose:t,children:[(0,a.jsx)(l.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,a.jsx)(l.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)(i.lG.Panel,{className:"relative transform overflow-hidden rounded-2xl bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,a.jsx)(c.A,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,a.jsx)(i.lG.Title,{as:"h3",className:"text-lg font-semibold leading-6 text-slate-900",children:s}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-slate-600",children:n})})]})]}),(0,a.jsxs)("div",{className:"mt-6 sm:mt-4 sm:flex sm:flex-row-reverse gap-3",children:[o&&(0,a.jsxs)(p(),{href:"/user",className:"inline-flex w-full justify-center rounded-lg bg-cyan-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-cyan-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600 sm:w-auto",onClick:t,children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]}),m&&(0,a.jsxs)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-lg bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 sm:mt-0 sm:w-auto",onClick:t,children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})]})})})})]})})}function h({children:e,fallback:t,requiredRole:s,redirectTo:l="/login"}){let i=(0,n.useRouter)(),{user:c,isAuthenticated:d,isLoading:u}=(0,o.nc)(),[m,p]=(0,r.useState)(!1),[h,y]=(0,r.useState)(!1);return!m||u?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Loading..."})]})}):d?s&&c?.role!==s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{isOpen:h,onClose:()=>{y(!1),c?.role==="ADMIN"?i.push("/admin"):i.push("/user")},title:"Access Denied",message:`This page requires ${s} privileges. You currently have ${c?.role} access.`,showHomeButton:!0,showBackButton:!1}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Checking permissions..."})]})})]}):(0,a.jsx)(a.Fragment,{children:e}):t||(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Redirecting to login..."})]})})}},40887:(e,t,s)=>{Promise.resolve().then(s.bind(s,21825))},49946:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(43210);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},87865:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s(51787);let r={applyForLoan:async e=>{try{return(await a.uE.post("/loans/apply",e)).data}catch(e){throw console.error("Failed to apply for loan:",e),e}},getMyApplications:async()=>{try{return(await a.uE.get("/loans/my-applications")).data}catch(e){throw console.error("Failed to fetch loan applications:",e),e}},getApplication:async e=>{try{return(await a.uE.get(`/loans/${e}`)).data}catch(e){throw console.error("Failed to fetch loan application:",e),e}},getMyLoans:async()=>{try{return(await a.uE.get("/loans/my-loans")).data}catch(e){throw console.error("Failed to fetch user loans:",e),e}},getLoanStats:async()=>{try{return(await a.uE.get("/loans/stats")).data}catch(e){throw console.error("Failed to fetch loan stats:",e),e}},makePayment:async(e,t,s="INSTALLMENT")=>{try{return(await a.uE.post(`/loans/${e}/payments`,{amount:t,type:s})).data}catch(e){throw console.error("Failed to make payment:",e),e}},getPaymentHistory:async e=>{try{return(await a.uE.get(`/loans/${e}/payments`)).data}catch(e){throw console.error("Failed to fetch payment history:",e),e}},cancelApplication:async e=>{try{await a.uE.delete(`/loans/applications/${e}`)}catch(e){throw console.error("Failed to cancel application:",e),e}},requestEarlyRepayment:async e=>{try{return(await a.uE.post(`/loans/${e}/early-repayment`)).data}catch(e){throw console.error("Failed to request early repayment:",e),e}},getLoanAgreement:async e=>{try{return(await a.uE.get(`/loans/${e}/agreement`)).data}catch(e){throw console.error("Failed to fetch loan agreement:",e),e}},acceptLoanAgreement:async e=>{try{await a.uE.post(`/loans/${e}/accept-agreement`)}catch(e){throw console.error("Failed to accept loan agreement:",e),e}}}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,64,571,278,873,417,622,646],()=>s(32211));module.exports=a})();