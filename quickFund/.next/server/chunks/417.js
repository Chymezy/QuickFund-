exports.id=417,exports.ids=[417],exports.modules={10472:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,16444,23)),Promise.resolve().then(s.t.bind(s,16042,23)),Promise.resolve().then(s.t.bind(s,88170,23)),Promise.resolve().then(s.t.bind(s,49477,23)),Promise.resolve().then(s.t.bind(s,29345,23)),Promise.resolve().then(s.t.bind(s,12089,23)),Promise.resolve().then(s.t.bind(s,46577,23)),Promise.resolve().then(s.t.bind(s,31307,23))},41347:(e,t,s)=>{"use strict";s.d(t,{nc:()=>u});var r=s(24416),n=s(37992),o=s(78706),a=s(51787),i=s(25931);let l=()=>null,c=()=>{},u=(0,r.v)()((0,n.Zr)((e,t)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,success:null,sessionId:null,setLoading:t=>e({isLoading:t}),clearError:()=>e({error:null}),clearSuccess:()=>e({success:null}),setUser:t=>e({user:t,isAuthenticated:!0,error:null}),login:async t=>{e({isLoading:!0,error:null,success:null});try{let s=await o.authApi.login(t),r=null;try{s.accessToken&&(r=(0,i.s)(s.accessToken).sessionId||void 0)}catch(e){console.warn("Failed to decode JWT for sessionId:",e)}e({user:s.user,isAuthenticated:!0,isLoading:!1,error:null,success:"Login successful! Welcome back.",sessionId:r})}catch(t){throw e({isLoading:!1,error:t.response?.data?.message||"Login failed",success:null,sessionId:null}),t}},register:async t=>{e({isLoading:!0,error:null,success:null});try{await o.authApi.register(t),e({user:null,isAuthenticated:!1,isLoading:!1,error:null,success:"Account created successfully! Please sign in to continue."})}catch(t){throw e({isLoading:!1,error:t.response?.data?.message||"Registration failed",success:null}),t}},logout:async()=>{e({isLoading:!0,error:null,success:null});let s=t().sessionId;try{await o.authApi.logout("string"==typeof s&&s?s:void 0)}catch(e){console.warn("Logout error:",e)}finally{(0,a.Tp)(),c(),e({user:null,isAuthenticated:!1,isLoading:!1,error:null,success:"Logged out successfully. Come back soon!",sessionId:null})}},getProfile:async()=>{e({isLoading:!0,error:null,success:null});try{let t=await o.authApi.getProfile();e({user:t,isAuthenticated:!0,isLoading:!1,error:null,success:null})}catch(t){throw e({isLoading:!1,error:t.response?.data?.message||"Failed to get profile",success:null}),t}},initialize:async()=>{e({isLoading:!0});try{if(!l())return void e({user:null,isAuthenticated:!1,isLoading:!1,error:null,success:null});await o.authApi.refreshToken();let t=await o.authApi.getProfile();e({user:t,isAuthenticated:!0,isLoading:!1,error:null,success:null})}catch(t){console.warn("Session refresh failed or expired:",t?.message||t),(0,a.Tp)(),c(),e({user:null,isAuthenticated:!1,isLoading:!1,error:null,success:null})}}}),{name:"quickfund-auth",storage:(0,n.KU)(()=>({getItem:e=>{try{return localStorage.getItem(e)}catch{return null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(e){console.warn("Failed to persist auth state:",e)}},removeItem:e=>{try{localStorage.removeItem(e)}catch(e){console.warn("Failed to remove auth state:",e)}}})),partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,error:e.error,success:e.success})}))},51787:(e,t,s)=>{"use strict";s.d(t,{O5:()=>l,Tp:()=>c,uE:()=>i});var r=s(33232);let n=()=>"http://localhost:3001/api/v1";class o{constructor(){this.accessToken=null}static getInstance(){return o.instance||(o.instance=new o),o.instance}setToken(e){this.accessToken=e}getToken(){return this.accessToken}clearToken(){this.accessToken=null}}let a=o.getInstance(),i=(()=>{let e=r.A.create({baseURL:n(),timeout:1e4,headers:{"Content-Type":"application/json"},withCredentials:!0});return e.interceptors.request.use(e=>{let t=a.getToken();return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,async t=>{let r=t.config;if(t.response?.status===401&&!r._retry){r._retry=!0;try{let{authApi:t}=await Promise.resolve().then(s.bind(s,78706)),n=await t.refreshToken();return r.headers.Authorization=`Bearer ${n.accessToken}`,e(r)}catch(e){return a.clearToken(),Promise.reject(e)}}return Promise.reject(t)}),e})(),l=e=>{a.setToken(e)},c=()=>{a.clearToken()}},53615:(e,t,s)=>{Promise.resolve().then(s.bind(s,54676))},54676:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/smart/projects/QuickFund-/quickFund/src/components/auth/AuthProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/smart/projects/QuickFund-/quickFund/src/components/auth/AuthProvider.tsx","default")},61135:()=>{},61863:(e,t,s)=>{Promise.resolve().then(s.bind(s,88894))},74024:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,86346,23)),Promise.resolve().then(s.t.bind(s,27924,23)),Promise.resolve().then(s.t.bind(s,35656,23)),Promise.resolve().then(s.t.bind(s,40099,23)),Promise.resolve().then(s.t.bind(s,38243,23)),Promise.resolve().then(s.t.bind(s,28827,23)),Promise.resolve().then(s.t.bind(s,62763,23)),Promise.resolve().then(s.t.bind(s,97173,23))},78706:(e,t,s)=>{"use strict";s.d(t,{authApi:()=>i});var r=s(51787);let n=()=>null,o=e=>{},a=()=>{},i={login:async e=>{let t=await r.uE.post("/auth/login",e);return(0,r.O5)(t.data.accessToken),o(t.data.refreshToken),t.data},register:async e=>(await r.uE.post("/auth/register",e)).data,getProfile:async()=>(await r.uE.get("/auth/profile")).data.user,refreshToken:async e=>{let t=n();if(!t)throw Error("No refresh token available");let s=await r.uE.post("/auth/refresh",{refreshToken:t});return(0,r.O5)(s.data.accessToken),o(s.data.refreshToken),s.data},logout:async e=>{try{await r.uE.post("/auth/logout",{sessionId:e})}catch(e){console.warn("Logout request failed, but clearing local tokens:",e)}finally{(0,r.Tp)(),a()}},validateToken:async()=>{try{return await r.uE.get("/auth/profile"),!0}catch(e){return!1}},changePassword:async(e,t)=>{await r.uE.put("/auth/change-password",{currentPassword:e,newPassword:t})},forgotPassword:async e=>{await r.uE.post("/auth/forgot-password",{email:e})},resetPassword:async(e,t)=>{await r.uE.post("/auth/reset-password",{token:e,newPassword:t})}},{login:l,register:c,getProfile:u,refreshToken:d,logout:h,validateToken:g,changePassword:m,forgotPassword:p,resetPassword:f}=i},88894:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(60687);s(43210);var n=s(41347);function o({children:e}){let{initialize:t,isAuthenticated:s}=(0,n.nc)();return(0,r.jsx)(r.Fragment,{children:e})}},94431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,metadata:()=>o});var r=s(37413);s(61135);var n=s(54676);let o={title:"QuickFund",description:"Empowering Your Future With Instant Micro Loans"};function a({children:e}){return(0,r.jsx)("html",{lang:"en",className:"h-full",children:(0,r.jsx)("body",{className:"flex min-h-full flex-col font-sans antialiased",style:{backgroundColor:"var(--color-background)"},children:(0,r.jsx)(n.default,{children:e})})})}}};