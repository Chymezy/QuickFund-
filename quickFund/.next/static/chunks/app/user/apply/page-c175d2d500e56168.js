(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{4605:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var a=s(95155),n=s(12115),l=s(35695),o=s(83459),r=s(44311),i=s(61608),c=s(95131),d=s(74310),m=s(52329),u=s(6874),h=s.n(u);function x(e){let{isOpen:t,onClose:s,title:l="Access Denied",message:o="You don't have permission to access this page. Please contact your administrator if you believe this is an error.",showHomeButton:u=!0,showBackButton:x=!0}=e;return(0,a.jsx)(r.e.Root,{show:t,as:n.Fragment,children:(0,a.jsxs)(i.lG,{as:"div",className:"relative z-50",onClose:s,children:[(0,a.jsx)(r.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-slate-900/75 backdrop-blur-sm"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,a.jsx)(r.e.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)(i.lG.Panel,{className:"relative transform overflow-hidden rounded-2xl bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,a.jsx)(c.A,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,a.jsx)(i.lG.Title,{as:"h3",className:"text-lg font-semibold leading-6 text-slate-900",children:l}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-slate-600",children:o})})]})]}),(0,a.jsxs)("div",{className:"mt-6 sm:mt-4 sm:flex sm:flex-row-reverse gap-3",children:[u&&(0,a.jsxs)(h(),{href:"/user",className:"inline-flex w-full justify-center rounded-lg bg-cyan-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-cyan-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600 sm:w-auto",onClick:s,children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]}),x&&(0,a.jsxs)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-lg bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 sm:mt-0 sm:w-auto",onClick:s,children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})]})})})})]})})}function p(e){let{children:t,fallback:s,requiredRole:r,redirectTo:i="/login"}=e,c=(0,l.useRouter)(),{user:d,isAuthenticated:m,isLoading:u}=(0,o.nc)(),[h,p]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=setTimeout(()=>{p(!0)},100);return()=>clearTimeout(e)},[]),(0,n.useEffect)(()=>{!h||u||m?h&&!u&&r&&(null==d?void 0:d.role)!==r&&v(!0):c.push(i)},[m,u,h,c,r,null==d?void 0:d.role,i]),!h||u)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Loading..."})]})}):m?r&&(null==d?void 0:d.role)!==r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{isOpen:y,onClose:()=>{v(!1),(null==d?void 0:d.role)==="ADMIN"?c.push("/admin"):c.push("/user")},title:"Access Denied",message:"This page requires ".concat(r," privileges. You currently have ").concat(null==d?void 0:d.role," access."),showHomeButton:!0,showBackButton:!1}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Checking permissions..."})]})})]}):(0,a.jsx)(a.Fragment,{children:t}):s||(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Redirecting to login..."})]})})}},39072:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12115);let n=a.forwardRef(function(e,t){let{title:s,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})},55077:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(95155),n=s(12115),l=s(35695),o=s(57884),r=s(4605),i=s(41553),c=s(94229),d=s(83459),m=s(97487),u=s(39072),h=s(90300),x=s(23571);function p(){let e=(0,l.useRouter)(),{user:t}=(0,d.nc)(),[s,p]=(0,n.useState)({amount:"",purpose:"",term:"",notes:"",agreeToTerms:!1}),[y,v]=(0,n.useState)(!1),[f,b]=(0,n.useState)(!1),[j,g]=(0,n.useState)(!1),[w,N]=(0,n.useState)(null),[E,A]=(0,n.useState)(null),[k,T]=(0,n.useState)(!1),[F,C]=(0,n.useState)(null),[S,L]=(0,n.useState)(null),P=(0,n.useRef)(null),R={"250000-500000":{min:25e4,max:5e5,default:375e3},"500000-1000000":{min:5e5,max:1e6,default:75e4},"1000000-2500000":{min:1e6,max:25e5,default:175e4},"2500000-5000000":{min:25e5,max:5e6,default:375e4},"5000000-10000000":{min:5e6,max:1e7,default:75e5},"10000000+":{min:1e7,max:5e7,default:15e6}},D={3:3,6:6,12:12,18:18,24:24,36:36,48:48,60:60},I=e=>{let{name:t,value:s,type:a}=e.target,n="checkbox"===a?e.target.checked:void 0;p(e=>({...e,[t]:"checkbox"===a?n:s})),w&&N(null)},M=()=>s.amount?s.purpose?s.term?s.agreeToTerms?R[s.amount]?D[s.term]?null:"Invalid loan term selected":"Invalid loan amount selected":"Please agree to the terms and conditions":"Please select a loan term":"Please select a loan purpose":"Please select a loan amount",O=async e=>{e.preventDefault();let t=M();if(t)return void N(t);v(!0),N(null);try{let e=R[s.amount],t=D[s.term],a={amount:e.default,purpose:s.purpose,term:t,notes:s.notes||void 0},n=await m.p.applyForLoan(a);A(n),g(!0),q(n.id)}catch(e){var a,n;console.error("Failed to submit loan application:",e),N((null==(n=e.response)||null==(a=n.data)?void 0:a.message)||e.message||"Failed to submit loan application. Please try again.")}finally{v(!1)}},q=e=>{P.current&&clearInterval(P.current),P.current=setInterval(async()=>{try{let t=await m.p.getApplication(e);A(t),"PENDING"!==t.status&&(clearInterval(P.current),C("REJECTED"===t.status?"REJECTED":"PENDING"),L(t.rejectionReason||null),T(!0),g(!1))}catch(e){}},2e3)};(0,n.useEffect)(()=>()=>{P.current&&clearInterval(P.current)},[]);let G=()=>{g(!1),e.push("/user/loans")},B=()=>{T(!1),e.push("/user/loans")};return(0,a.jsx)(r.A,{requiredRole:"USER",children:(0,a.jsxs)(o.A,{children:[(0,a.jsx)("section",{className:"py-8 sm:py-12 md:py-16 lg:py-20 bg-white",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6 sm:p-8 lg:p-12",children:[(0,a.jsxs)("div",{className:"text-center mb-6 sm:mb-8 lg:mb-12",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Apply for a Loan"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-slate-600 max-w-2xl mx-auto",children:"Get the funds you need in as little as 24 hours with our streamlined application process"})]}),w&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 text-red-600"}),(0,a.jsx)("p",{className:"text-red-700 text-sm",children:w})]})}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-6 sm:space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-700 mb-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 sm:w-5 sm:h-5 inline mr-2"}),"Loan Amount *"]}),(0,a.jsxs)("select",{id:"amount",name:"amount",required:!0,value:s.amount,onChange:I,className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors text-sm sm:text-base",children:[(0,a.jsx)("option",{value:"",children:"Select loan amount"}),(0,a.jsx)("option",{value:"250000-500000",children:"₦250,000 - ₦500,000"}),(0,a.jsx)("option",{value:"500000-1000000",children:"₦500,000 - ₦1,000,000"}),(0,a.jsx)("option",{value:"1000000-2500000",children:"₦1,000,000 - ₦2,500,000"}),(0,a.jsx)("option",{value:"2500000-5000000",children:"₦2,500,000 - ₦5,000,000"}),(0,a.jsx)("option",{value:"5000000-10000000",children:"₦5,000,000 - ₦10,000,000"}),(0,a.jsx)("option",{value:"10000000+",children:"₦10,000,000+"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"purpose",className:"block text-sm font-medium text-slate-700 mb-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 sm:w-5 sm:h-5 inline mr-2"}),"Loan Purpose *"]}),(0,a.jsxs)("select",{id:"purpose",name:"purpose",required:!0,value:s.purpose,onChange:I,className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors text-sm sm:text-base",children:[(0,a.jsx)("option",{value:"",children:"Select loan purpose"}),(0,a.jsx)("option",{value:"business",children:"Business Expansion"}),(0,a.jsx)("option",{value:"personal",children:"Personal Expenses"}),(0,a.jsx)("option",{value:"education",children:"Education"}),(0,a.jsx)("option",{value:"home",children:"Home Improvement"}),(0,a.jsx)("option",{value:"vehicle",children:"Vehicle Purchase"}),(0,a.jsx)("option",{value:"medical",children:"Medical Expenses"}),(0,a.jsx)("option",{value:"debt",children:"Debt Consolidation"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"term",className:"block text-sm font-medium text-slate-700 mb-2",children:"Loan Term (Months) *"}),(0,a.jsxs)("select",{id:"term",name:"term",required:!0,value:s.term,onChange:I,className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors text-sm sm:text-base",children:[(0,a.jsx)("option",{value:"",children:"Select loan term"}),(0,a.jsx)("option",{value:"3",children:"3 months"}),(0,a.jsx)("option",{value:"6",children:"6 months"}),(0,a.jsx)("option",{value:"12",children:"12 months"}),(0,a.jsx)("option",{value:"18",children:"18 months"}),(0,a.jsx)("option",{value:"24",children:"24 months"}),(0,a.jsx)("option",{value:"36",children:"36 months"}),(0,a.jsx)("option",{value:"48",children:"48 months"}),(0,a.jsx)("option",{value:"60",children:"60 months"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-slate-700 mb-2",children:"Additional Notes (Optional)"}),(0,a.jsx)("textarea",{id:"notes",name:"notes",value:s.notes,onChange:I,rows:4,placeholder:"Please provide any additional information about your loan request...",className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors text-sm sm:text-base resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"agreeToTerms",name:"agreeToTerms",required:!0,checked:s.agreeToTerms,onChange:I,className:"mt-1 w-4 h-4 text-cyan-600 border-slate-300 rounded focus:ring-cyan-500 flex-shrink-0"}),(0,a.jsxs)("label",{htmlFor:"agreeToTerms",className:"text-xs sm:text-sm text-slate-600",children:["I agree to the"," ",(0,a.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),b(!0)},className:"text-cyan-600 hover:text-cyan-700 font-semibold underline",children:"Terms of Service"})," ","and"," ",(0,a.jsx)("a",{href:"/privacy",className:"text-cyan-600 hover:text-cyan-700 font-semibold",children:"Privacy Policy"})," *"]})]}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-cyan-600 text-white font-semibold rounded-lg shadow-md hover:bg-cyan-700 focus:bg-cyan-700 active:bg-cyan-800 hover:scale-105 focus:scale-105 active:scale-95 hover:shadow-lg focus:shadow-lg active:shadow-md transition-all duration-300 touch-manipulation select-none disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-sm sm:text-base",children:y?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting Application..."]}):"Submit Application"})]})]})})}),(0,a.jsx)(i.A,{isOpen:f,onClose:()=>b(!1)}),(0,a.jsx)(c.A,{isOpen:j,onClose:G,title:"Application Submitted!",message:"Your loan application has been submitted and is under review. You'll be notified here as soon as a decision is made.",actionText:"View My Applications",onAction:G,autoClose:!1}),(0,a.jsx)(c.A,{isOpen:k,onClose:B,title:"REJECTED"===F?"Loan Rejected":"Application Under Review",message:"REJECTED"===F?"Sorry, your loan application was rejected.".concat(S?" Reason: "+S:""):"Your loan application is under review. You will be notified once an admin reviews your application.",actionText:"Go to My Loans",onAction:B,autoClose:!1})]})})}},56289:(e,t,s)=>{Promise.resolve().then(s.bind(s,55077))},90300:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12115);let n=a.forwardRef(function(e,t){let{title:s,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),s?a.createElement("title",{id:n},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},97487:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(7283);let n={applyForLoan:async e=>{try{return(await a.uE.post("/loans/apply",e)).data}catch(e){throw console.error("Failed to apply for loan:",e),e}},getMyApplications:async()=>{try{return(await a.uE.get("/loans/my-applications")).data}catch(e){throw console.error("Failed to fetch loan applications:",e),e}},getApplication:async e=>{try{return(await a.uE.get("/loans/".concat(e))).data}catch(e){throw console.error("Failed to fetch loan application:",e),e}},getMyLoans:async()=>{try{return(await a.uE.get("/loans/my-loans")).data}catch(e){throw console.error("Failed to fetch user loans:",e),e}},getLoanStats:async()=>{try{return(await a.uE.get("/loans/stats")).data}catch(e){throw console.error("Failed to fetch loan stats:",e),e}},makePayment:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INSTALLMENT";try{return(await a.uE.post("/loans/".concat(e,"/payments"),{amount:t,type:s})).data}catch(e){throw console.error("Failed to make payment:",e),e}},getPaymentHistory:async e=>{try{return(await a.uE.get("/loans/".concat(e,"/payments"))).data}catch(e){throw console.error("Failed to fetch payment history:",e),e}},cancelApplication:async e=>{try{await a.uE.delete("/loans/applications/".concat(e))}catch(e){throw console.error("Failed to cancel application:",e),e}},requestEarlyRepayment:async e=>{try{return(await a.uE.post("/loans/".concat(e,"/early-repayment"))).data}catch(e){throw console.error("Failed to request early repayment:",e),e}},getLoanAgreement:async e=>{try{return(await a.uE.get("/loans/".concat(e,"/agreement"))).data}catch(e){throw console.error("Failed to fetch loan agreement:",e),e}},acceptLoanAgreement:async e=>{try{await a.uE.post("/loans/".concat(e,"/accept-agreement"))}catch(e){throw console.error("Failed to accept loan agreement:",e),e}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[981,360,629,531,74,248,441,684,358],()=>t(56289)),_N_E=e.O()}]);