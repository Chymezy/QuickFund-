(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{6119:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(12115);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))})},28923:(e,t,s)=>{Promise.resolve().then(s.bind(s,49135))},49135:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var l=s(95155),a=s(12115),n=s(57884),r=s(245),i=s(6119),c=s(27993),o=s(39072),d=s(90300),x=s(23571),m=s(69413),u=s(58346),p=s(1534),h=s(45995),j=s(22264);function v(){let[e,t]=(0,a.useState)([]),[s,v]=(0,a.useState)(!0),[f,N]=(0,a.useState)(null),[w,g]=(0,a.useState)(""),[y,b]=(0,a.useState)("all"),[A,L]=(0,a.useState)("all"),[E,k]=(0,a.useState)("date"),[C,D]=(0,a.useState)("desc");(0,a.useEffect)(()=>{(async()=>{v(!0),N(null);try{let e=await h.i.getPayments({limit:100});t(e.payments||[])}catch(t){var e,s;N((null==t||null==(s=t.response)||null==(e=s.data)?void 0:e.message)||(null==t?void 0:t.message)||"Failed to load payments.")}finally{v(!1)}})()},[]);let P=(0,a.useMemo)(()=>{let t=e;return"all"!==y&&(t=t.filter(e=>e.status===y)),"all"!==A&&(t=t.filter(e=>e.type===A)),w&&(t=t.filter(e=>{var t,s,l,a,n,r,i,c,o,d,x,m;return(null==(t=e.id)?void 0:t.toLowerCase().includes(w.toLowerCase()))||(null==(s=e.loanId)?void 0:s.toLowerCase().includes(w.toLowerCase()))||(null==(l=e.reference)?void 0:l.toLowerCase().includes(w.toLowerCase()))||(null==(r=e.loan)||null==(n=r.user)||null==(a=n.firstName)?void 0:a.toLowerCase().includes(w.toLowerCase()))||(null==(o=e.loan)||null==(c=o.user)||null==(i=c.lastName)?void 0:i.toLowerCase().includes(w.toLowerCase()))||(null==(m=e.loan)||null==(x=m.user)||null==(d=x.email)?void 0:d.toLowerCase().includes(w.toLowerCase()))})),t.sort((e,t)=>{let s=0;switch(E){case"date":s=new Date(t.paidAt||t.processedAt||t.createdAt).getTime()-new Date(e.paidAt||e.processedAt||e.createdAt).getTime();break;case"amount":s=t.amount-e.amount;break;case"user":var l,a,n,r,i,c,o,d;let x="".concat((null==(a=e.loan)||null==(l=a.user)?void 0:l.firstName)||"Unknown"," ").concat((null==(r=e.loan)||null==(n=r.user)?void 0:n.lastName)||"User").toLowerCase(),m="".concat((null==(c=t.loan)||null==(i=c.user)?void 0:i.firstName)||"Unknown"," ").concat((null==(d=t.loan)||null==(o=d.user)?void 0:o.lastName)||"User").toLowerCase();s=x.localeCompare(m)}return"asc"===C?-s:s}),t},[w,y,A,E,C,e]),T=(0,a.useMemo)(()=>{let e=P.length,t=P.reduce((e,t)=>e+t.amount,0),s=P.filter(e=>"COMPLETED"===e.status).length,l=P.filter(e=>"PENDING"===e.status).length;return{totalPayments:e,totalAmount:t,completedPayments:s,pendingPayments:l,failedPayments:P.filter(e=>"FAILED"===e.status).length,averageAmount:e>0?t/e:0}},[P]),I=e=>{switch(e){case"COMPLETED":return r.A;case"PENDING":return i.A;case"FAILED":return c.A;default:return o.A}};return s?(0,l.jsx)(n.A,{children:(0,l.jsx)("div",{className:"py-8 sm:py-12 md:py-16 lg:py-20 bg-white",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-slate-600",children:"Loading payment history..."})]})})})}):f?(0,l.jsx)(n.A,{children:(0,l.jsx)("div",{className:"py-8 sm:py-12 md:py-16 lg:py-20 bg-white",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(o.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Error"}),(0,l.jsx)("p",{className:"text-slate-600 mb-6",children:f}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition-colors",children:"Try Again"})]})})})}):(0,l.jsx)(n.A,{children:(0,l.jsx)("div",{className:"py-8 sm:py-12 md:py-16 lg:py-20 bg-white",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"mb-8 sm:mb-12",children:[(0,l.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Payment Management"}),(0,l.jsx)("p",{className:"text-sm sm:text-base text-slate-600",children:"Monitor and manage all loan payments across the platform"})]}),(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-slate-600 text-sm",children:"Total Payments"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:T.totalPayments})]}),(0,l.jsx)(d.A,{className:"w-8 h-8 text-cyan-600"})]})}),(0,l.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-slate-600 text-sm",children:"Total Amount"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(0,j.vv)(T.totalAmount)})]}),(0,l.jsx)(x.A,{className:"w-8 h-8 text-green-600"})]})}),(0,l.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-slate-600 text-sm",children:"Completed"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-green-600",children:T.completedPayments})]}),(0,l.jsx)(r.A,{className:"w-8 h-8 text-green-600"})]})}),(0,l.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-slate-600 text-sm",children:"Average Amount"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:(0,j.vv)(T.averageAmount)})]}),(0,l.jsx)(m.A,{className:"w-8 h-8 text-blue-600"})]})})]})}),(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,l.jsx)("input",{type:"text",placeholder:"Search by payment ID, loan ID, reference, or user name...",value:w,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors"})]})}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,l.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors",children:[(0,l.jsx)("option",{value:"all",children:"All Status"}),(0,l.jsx)("option",{value:"COMPLETED",children:"Completed"}),(0,l.jsx)("option",{value:"PENDING",children:"Pending"}),(0,l.jsx)("option",{value:"FAILED",children:"Failed"})]}),(0,l.jsxs)("select",{value:A,onChange:e=>L(e.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors",children:[(0,l.jsx)("option",{value:"all",children:"All Types"}),(0,l.jsx)("option",{value:"INSTALLMENT",children:"Installment"}),(0,l.jsx)("option",{value:"EARLY_REPAYMENT",children:"Early Repayment"}),(0,l.jsx)("option",{value:"LATE_FEE",children:"Late Fee"})]}),(0,l.jsxs)("select",{value:"".concat(E,"-").concat(C),onChange:e=>{let[t,s]=e.target.value.split("-");k(t),D(s)},className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-colors",children:[(0,l.jsx)("option",{value:"date-desc",children:"Date (Newest)"}),(0,l.jsx)("option",{value:"date-asc",children:"Date (Oldest)"}),(0,l.jsx)("option",{value:"amount-desc",children:"Amount (High to Low)"}),(0,l.jsx)("option",{value:"amount-asc",children:"Amount (Low to High)"}),(0,l.jsx)("option",{value:"user-asc",children:"User (A-Z)"}),(0,l.jsx)("option",{value:"user-desc",children:"User (Z-A)"})]})]}),(0,l.jsx)("div",{className:"flex items-center justify-end",children:(0,l.jsxs)("span",{className:"text-sm text-slate-600",children:[P.length," payment",1!==P.length?"s":""]})})]})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Payment History"}),(0,l.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full",children:[(0,l.jsx)("thead",{className:"bg-slate-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Payment ID"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"User"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Loan ID"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Amount"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Gateway"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Reference"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:P.map(e=>{var t,s,a,n,r,i,c,o;let d=(0,j.DY)(e.status),x=I(e.status);return(0,l.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:e.id}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(p.A,{className:"w-4 h-4 text-slate-400 mr-2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:(null==(t=e.loan)?void 0:t.user)?"".concat(e.loan.user.firstName||""," ").concat(e.loan.user.lastName||"").trim()||e.loan.user.email||e.loan.user.id:(null==(a=e.loan)||null==(s=a.user)?void 0:s.email)||(null==(r=e.loan)||null==(n=r.user)?void 0:n.id)||"Unknown"}),(0,l.jsx)("div",{className:"text-slate-500 text-xs",children:(null==(c=e.loan)||null==(i=c.user)?void 0:i.email)||""})]})]})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:e.loanId}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-slate-900",children:(0,j.vv)(e.amount)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:(0,l.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-800",children:null==(o=e.type)?void 0:o.replace("_"," ")})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:(0,j.Yq)(e.paidAt||e.processedAt||e.createdAt)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat(d.bgColor," ").concat(d.color),children:[(0,l.jsx)(x,{className:"w-3 h-3"}),d.label]})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:e.gateway||"N/A"}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:(0,l.jsx)("span",{className:"font-mono text-xs",children:e.reference})})]},e.id)})})]})})})]}),0===P.length&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(d.A,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No payments found"}),(0,l.jsx)("p",{className:"text-slate-600",children:w||"all"!==y||"all"!==A?"Try adjusting your search criteria or filters.":"No payments have been made yet."})]})]})})})}},58346:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(12115);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})},69413:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(12115);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[981,360,74,388,441,684,358],()=>t(28923)),_N_E=e.O()}]);